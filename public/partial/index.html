
          <template>
                      <div class="page" data-name="reader-home">

          <nav-bar
            logo="${logo}"
            library_url=""
            large_url=""
            title="Mr Test The Test Machine"
            show_mint_page="false"
            show_activity_page="false"
            breadcrumbs="${breadcrumbs}"
          >
          </nav-bar>


          <token-toolbar
            token_id="0"
            item_count="2" 
          >
          </token-toolbar>


          <div class="page-content">

            <div class="main-split">

              <div class="left">

                <div class="card channel-card-show">

                  <div class="card-header banner" id="banner"                         style="background: #cccccc;"

                                              >
    
                        <a href="/mr-test-the-test-machine/index.html">
                                                      <i class="f7-icons avatar">photo</i>
                                                  </a>
    
                  </div>
    
                  <div class="card-content card-content-padding">
    
                    <div class="title">
                      Mr Test The Test Machine                    </div>
    
                                          <div class="name">
                        By 0x8424â€¦ab55                      </div>
                        
                    <div class="description" id="channel-show-description-4be0885f-ec83-4c53-ae74-109f2bde5f34">
                      <p>asdfasd</p>                    </div>
    
    
                    <div class="start-buttons">
                      <a href="/mr-test-the-test-machine/t/1" class="button button-fill text-color-white ready-button" data-transition="f7-cover">Browse Collection</a>
                      <a href="/mr-test-the-test-machine/explore.html" class="button button-outline ready-button" data-transition="f7-cover">Explore</a>

                    </div>
    
    
                  </div>
    
                </div>
    
                <div class="hidden-on-load">
    
                  

                    
  
                  
  
  
  
                  ${homeViewModel?.largestSales && homeViewModel.largestSales?.sales?.length > 0 ? $h`

                    <div class="card card-header-divider data-table">
                      <div class="card-header">Largest Sales</div>
                      <div class="card-content card-content-padding">
                        <largest-sales largest_sales="${homeViewModel?.largestSales}"></largest-sales>
                      </div>
                    </div>
  
  
                    <div class="block save-row">
                      <div class="large-only"></div>
                      <a href="${link('sales')}" class="button button-fill">View Top 100</a>
                    </div>
  
                  ` : $h` `}
  
  
                  ${homeViewModel?.recent?.transactions?.length > 0 ? $h`
    
                    <transaction-row transactions="${homeViewModel.recent}" items="${homeViewModel?.recent.rowItemViewModels}">

                      <div class="card-header">
                        Recent Activity
                        <div class="last-updated">Updated: ${dayjs(homeViewModel?.recent.lastUpdated).fromNow()}</div>
                      </div>

                    </transaction-row>
  
                    <div class="block save-row">
                      <div class="large-only"></div>
                      <a href="${link('activity')}" class="button button-fill">View All</a>
                    </div>
              
                  ` : $h`<span />`}
    
    
                </div>
                
                <div class="hide-on-pageinit">
    
                  <div class="card skeleton-text">
                    <div class="card-header">Overall Stats</div>
                    <div class="card-content card-content-padding data-table">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
  
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
  
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
  
                    </div>
  
                  </div>
  
  
                  <div class="card skeleton-text">
                    <div class="card-header">Overall Stats</div>
                    <div class="card-content card-content-padding data-table">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
                    </div>
  
                  </div>
  
  
                  <div class="card skeleton-text">
                    <div class="card-header">Overall Stats</div>
                    <div class="card-content card-content-padding data-table">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                        lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
                    </div>
  
                  </div>
  
  
                  <div class="card skeleton-text">
                      <div class="card-header">Recent Activity</div>
                      <div class="card-content card-content-padding data-table">
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi
                          lobortis et massa ac interdum. Cras consequat felis at consequat hendrerit.
                      </div>
    
                  </div>
    
                </div>
    
  
                    
    
  
  
                  

              </div>

              <div class="right">

                <div class="hidden-on-load">
      
                  

                    
                </div>

              </div>

              <div class="left">
                
<div class="block block-strong inset">

    <span class="footer-link">
      <strong>Large NFT</strong> code licensed under <a href="https://github.com/LargeNFT/large-nft/blob/master/LICENSE.md" class="external">MIT</a>
    </span>

    <span class="footer-link">
      <a href="https://github.com/LargeNFT/large-nft" class="external">GitHub</a>
    </span>

    <span class="footer-link">
      <a href="https://twitter.com/large_nft" class="external">Twitter</a>
    </span>

</div>
              </div>

            </div>


          </div>

        </div>
        
          </template>

          <script>

              
      const init = (props, { $, $f7, $h, $on, $update }) => {

          let channelWebService = globalThis.container.get("ChannelWebService")

          let baseURI = globalThis.container.get("baseURI")
          let hostname = globalThis.container.get("hostname")

          let transactionWebService = globalThis.container.get("TransactionWebService")
          let itemWebService = globalThis.container.get("ItemWebService")
          let tokenOwnerPageService = globalThis.container.get("TokenOwnerPageService")
          let readerSettingsService = globalThis.container.get("ReaderSettingsService")

          let walletService = globalThis.container.get("WalletService")
          let mintWebService = globalThis.container.get("MintWebService")

          let breadcrumbs

          let logo = JSON.parse(`{}`)

          const PER_PAGE = 35

          let homeViewModel
          let mintingViewModel 

          let loading = true

          let firstPageExploreItems 

          const link = (href) => {
            return baseURI() + href
          }   

          const loadActivity = async () => {

            loading = true

            try  {

              homeViewModel = await transactionWebService.getHomeViewModel()

              //Last updated won't be right because this only gets written when it actually changes.
              let latest = await transactionWebService.getLatest()
              
              if (homeViewModel?.largestSales) {
                homeViewModel.largestSales.lastUpdated = latest?.lastUpdated
              }
  
              await $update()

            } catch(ex) { console.log(ex) }

            $('.hidden-on-load').removeClass('hidden-on-load')

            loading = false

            await $update()


          }

          const loadMintingViewModel = async () => {
      
            try  {

              if (!walletService.provider) {
                await walletService.initProvider()
              }

              //Might still not have a provider. 
              if (walletService.provider) {
                hasProvider = true
                mintingViewModel = await mintWebService.getHomeMintingViewModel()
              } 

            } catch(ex) {
              console.log(ex)
            }
            
            $f7.emit('minting-view-model-updated', mintingViewModel)


          }

          $on('pageInit', async () => {

            console.log("Loading channel")
            await channelWebService.loadChannel(
                    "4be0885f-ec83-4c53-ae74-109f2bde5f34",
                    '/mr-test-the-test-machine/',
                    'https://ptoner.github.io'
            )

            let readerSettings = await readerSettingsService.get()
            $f7.emit('current-page-updated', readerSettings.currentPage)

            
            
            console.log("Loading activity")
            await loadActivity()
            $update()

            $('.hide-on-pageinit').hide()

            $update()

            //Set empty alt for any decorative image tags that are missing it. 
            $("img:not([alt])").attr("alt", "")
          })

          $on('pageBeforeOut', async () => {
          })

          

document.querySelector('meta[property="og:title"]').setAttribute("content", "Mr Test The Test Machine")
document.querySelector('meta[property="og:url"]').setAttribute("content", "index.html")
document.querySelector('meta[property="og:image"]').setAttribute("content", "")
document.querySelector('meta[property="og:description"]').setAttribute("content", "asdfasd")

document.querySelector('meta[property="twitter:url"]').setAttribute("content", "index.html")
document.querySelector('meta[property="twitter:title"]').setAttribute("content", "Mr Test The Test Machine")
document.querySelector('meta[property="twitter:image"]').setAttribute("content", "")
document.querySelector('meta[property="twitter:description"]').setAttribute("content", "asdfasd" )

          document.querySelector('title').innerHTML = "Mr Test The Test Machine"

          $f7.preloader.hide()

          return $render

          

      }

      

              export default init
          </script>
      